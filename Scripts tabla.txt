select * from solicitante;
INSERT INTO public.solicitante(
     "nombre", "apellidosPaterno", "apellidosMaterno", "area", "cargo")
    VALUES ('Pablo Eduardo', 'Reyes', 'Aguirre', 'ISC', 'Secretario'),
			('María', 'Martínez', 'Hernández', 'ISC', 'Maestra'),
			('Pedro', 'González', 'Sánchez', 'Ing. Eléctrica', 'Ingeniero'),
			('Ana', 'Díaz', 'Luna', 'ISC', 'Ingeniera');
select * from subdirectora;
delete from subdirectora;
ALTER SEQUENCE public.subdirectora_id_seq RESTART WITH 1
INSERT INTO public.subdirectora(
	 nombre, "apellidosPaterno", "apellidosMaterno")
	VALUES ('Liliana Patricia', 'Ferreyra','Herrera');
SELECT * from "jefDepartamento";
INSERT INTO public."jefDepartamento"(
	 nombre, "apellidosPaterno", "apellidosMaterno", departamento)
	VALUES ('Claudio Ernesto', 'FLores', 'Arenas', 'ISC'),
		('Mario Jesus', 'Cortes', 'Sanchez', 'Ing. Eléctrica');

INSERT INTO public.trabajadores(
	 nombre, "apellidosPaterno", "apellidosMaterno", num_solicitudes)
	VALUES ( 'Juan', 'García', 'López', 0),
           ( 'María', 'Hernández', 'Martínez', 0),
           ( 'Pedro', 'Sánchez', 'González', 0),
           ( 'Ana', 'Luna', 'Díaz', 0),
           ( 'Luis', 'Fernández', 'Rodríguez', 0);

SELECT * from "jefMantenimiento";
INSERT INTO public."jefMantenimiento"(
	 nombre, "apellidosPaterno", "apellidosMaterno")
	VALUES ( 'Mario Misael', 'Machado', 'López');
-- Asociar trabajadores con jefMantenimiento
DO $$
DECLARE
    jefe_id INT;
BEGIN
    SELECT id INTO jefe_id FROM public."jefMantenimiento" WHERE nombre = 'Mario Misael';
    -- Asociar trabajadores con el jefe de mantenimiento
    INSERT INTO public."JefeMantenimiento_trabajadores" (jefmantenimiento_id, trabajador_id)
    SELECT jefe_id, id FROM public.trabajadores;
END $$;



-----



INSERT INTO public.solicitudes(
	id, folio, area_solicitante, "responsable_Area", tipo_servicio, descripcion, "des_Serv_Realizado", "des_Serv_no_Realizado", status, fecha, hora, material_utilizado, imagen, motv_rechazo, "jefDepartamento_id", "jefMantenimiento_id", solicitante_id, subdirectora_id, trabajadores_id)
	VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);

select * from solicitudes;
-- Solicitud 1
INSERT INTO public.solicitudes(
    folio, area_solicitante, "responsable_Area", tipo_servicio, descripcion, status, fecha, hora, "jefDepartamento_id", solicitante_id)
VALUES (
    1, 
    (SELECT s."area" FROM public.solicitante s WHERE s.id = 1 AND s."area" = (SELECT jd.departamento FROM public."jefDepartamento" jd WHERE jd.id = 1)), 
    (SELECT CONCAT(jd.nombre, ' ', jd."apellidosPaterno", ' ', jd."apellidosMaterno") FROM public."jefDepartamento" jd WHERE jd.id = 1), 
    'Cañones', 
    'Remplazar el soporte del cañon', 
    'Pendiente', 
    '2024-04-11', 
    '09:30:00', 
     
    1, 
    1
);

-- Solicitud 2: En proceso
INSERT INTO public.solicitudes(
    folio, area_solicitante, "responsable_Area", tipo_servicio, descripcion, status, fecha, hora, "jefDepartamento_id", solicitante_id, "jefMantenimiento_id", trabajadores_id)
VALUES (
    2, 
    (SELECT s."area" FROM public.solicitante s WHERE s.id = 1 AND s."area" = (SELECT jd.departamento FROM public."jefDepartamento" jd WHERE jd.id = 1)), 
    (SELECT CONCAT(jd.nombre, ' ', jd."apellidosPaterno", ' ', jd."apellidosMaterno") FROM public."jefDepartamento" jd WHERE jd.id = 1), 
    'Pintarrón', 
    'Limpiar el pizarrón del salón K3', 
    'En Proceso', 
    '2024-04-14', 
    '09:00:00',   
    1, -- Id Jefe del Departamento Claudio
    1, -- Id Solicitante Pablo
    1, -- Suponiendo que el jefe de mantenimiento también tiene ID 1
    3  -- ID del trabajador asignado (supongo que es el tercer trabajador)
);
-- Solicitud 3: Pausa
INSERT INTO public.solicitudes(
    folio, area_solicitante, "responsable_Area", tipo_servicio, descripcion, status, fecha, hora, "jefDepartamento_id", solicitante_id, "jefMantenimiento_id", trabajadores_id, subdirectora_id)
VALUES (
    3, 
    (SELECT s."area" FROM public.solicitante s WHERE s.id = 1 AND s."area" = (SELECT jd.departamento FROM public."jefDepartamento" jd WHERE jd.id = 1)), 
    (SELECT CONCAT(jd.nombre, ' ', jd."apellidosPaterno", ' ', jd."apellidosMaterno") FROM public."jefDepartamento" jd WHERE jd.id = 1), 
    'Cerrajería', 
    'El motivo del servicio de cerrajería es la necesidad de reparar la cerradura de la puerta del salon F2.', 
    'En Pausa', 
    '2024-04-05', 
    '16:45:39',   
    1, -- ID del jefe del departamento Claudio
    1, -- ID del solicitante Pablo
    1, -- Suponiendo que el jefe de mantenimiento también tiene ID 1
    2, -- ID del trabajador asignado
    1 -- ID de la subdirectora
    
);
-- Solicitud 4: Rechazo 
INSERT INTO public.solicitudes(
    folio, area_solicitante, "responsable_Area", tipo_servicio, descripcion, status, fecha, hora, "jefDepartamento_id", solicitante_id, "jefMantenimiento_id", motv_rechazo)
VALUES (
    4, 
    (SELECT s."area" FROM public.solicitante s WHERE s.id = 1 AND s."area" = (SELECT jd.departamento FROM public."jefDepartamento" jd WHERE jd.id = 1)), 
    (SELECT CONCAT(jd.nombre, ' ', jd."apellidosPaterno", ' ', jd."apellidosMaterno") FROM public."jefDepartamento" jd WHERE jd.id = 1), 
    'Eléctrica', 
    'Arreglar la luz del salón K9. La luz no se enciende y parece ser un falso contacto', 
    'Rechazo', 
    '2024-01-16', 
    '13:15:15',   
    1, -- ID del jefe del departamento Claudio
    1, -- ID del solicitante Pablo
    1, -- Suponiendo que el jefe de mantenimiento también tiene ID 1
    'El servicio de reparación eléctrica no puede ser realizado en este momento debido a la complejidad del problema, el cual afecta no solo al salón K9, sino también a otros salones adyacentes. Además, no contamos con el material necesario para llevar a cabo la reparación de manera eficiente. Se pospondrá hasta que se cuente con los recursos adecuados y se pueda coordinar una intervención que no afecte el funcionamiento de otros espacios.' -- Motivo de rechazo
);

-- Solicitud 5: completado 
INSERT INTO public.solicitudes(
    folio, area_solicitante, "responsable_Area", tipo_servicio, descripcion, status, fecha, hora, "jefDepartamento_id", solicitante_id, "jefMantenimiento_id", trabajadores_id, "des_Serv_Realizado", material_utilizado)
VALUES (
    5, 
    (SELECT s."area" FROM public.solicitante s WHERE s.id = 1 AND s."area" = (SELECT jd.departamento FROM public."jefDepartamento" jd WHERE jd.id = 1)), 
    (SELECT CONCAT(jd.nombre, ' ', jd."apellidosPaterno", ' ', jd."apellidosMaterno") FROM public."jefDepartamento" jd WHERE jd.id = 1), 
    'Pintura', 
    'Pintar el salón K1. Se necesita preparar las paredes, aplicar una capa base y dos capas de pintura.', 
    'Realizada', 
    '2024-01-10', 
    '20:11:13',   
    1, -- ID del jefe del departamento Claudio
    1, -- ID del solicitante Pablo
    1, -- Suponiendo que el jefe de mantenimiento también tiene ID 1
    2, -- ID del trabajador asignado
    'El trabajo de pintura se realizó siguiendo los estándares de calidad establecidos. Se prepararon las paredes, se aplicó una capa base y dos capas de pintura. Se revisó la superficie pintada para asegurar un acabado uniforme y limpio.', -- Descripción del servicio realizado
    'Pintura, brochas, rodillos, cinta de pintor, plástico protector' -- Materiales utilizados
);