{% extends "dep_mantenimiento/layout/layout.html" %}
{% load static %}
{% block title %}<title>SARH | I.T. Morelia</title>{% endblock %}
{% block navpath %}
   <li class="breadcrumb-item"><a href="{% url 'home' %}">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-grid-3x3-gap-fill" viewBox="0 0 16 16">
         <path d="M1 2a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2zm5 0a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V2zm5 0a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1V2zM1 7a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V7zm5 0a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V7zm5 0a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1V7zM1 12a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1v-2zm5 0a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1v-2zm5 0a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1v-2z"/>
      </svg>
   </a></li>
   <li class="breadcrumb-item"><a href="{% url 'Estatus_jMantenimiento' %}">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-house" viewBox="0 0 16 16">
         <path fill-rule="evenodd" d="M2 13.5V7h1v6.5a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5V7h1v6.5a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 13.5zm11-11V6l-2-2V2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5z"/>
         <path fill-rule="evenodd" d="M7.293 1.5a1 1 0 0 1 1.414 0l6.647 6.646a.5.5 0 0 1-.708.708L8 2.207 1.354 8.854a.5.5 0 1 1-.708-.708L7.293 1.5z"/>
      </svg>
   </a></li>
   <li class="breadcrumb-item"> Navegación </li>
   <li class="breadcrumb-item"> directorio </li>

{% endblock %}
{% block content %}

<span class="align-middle">


   <!DOCTYPE html>
   <html>
   <head>
       <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.12.313/pdf.min.js"></script>
       <title>visualizacion de la solicitud</title>
       <link rel="stylesheet" href="{% static "dep_mantenimiento/css/pages/jMantenimiento/estatus.css" %}">
   </head>
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" integrity="sha512-VF43PqFHZBCZh4ysadDxE2NVWvwuCFVcRY+2Yv29O2hXPIghXJfVQfRYHA3wEY0tDpgmSRThyM9jT+GjRQtrNw==" crossorigin="anonymous" referrerpolicy="no-referrer" />

   <body>
    <form id="formulario">
        <div class="top-bar">
            <a  href="{% url 'Inicio_jMantenimiento' %}">
            <button class="boton-con-icono" style="width: 150px; height: 30px;">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-20 h-20">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M6.75 15.75 3 12m0 0 3.75-3.75M3 12h18" />
                </svg>
                
                anterior
            </button> 
            </a>
            <button class="boton-con-icono" style="width: 150px; height: 30px;">
                siguiente 
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-20 h-20">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M17.25 8.25 21 12m0 0-3.75 3.75M21 12H3" />
                </svg>                
            </button> 
        </div>


            <div  style="text-align: center;" >
                <h5 style="text-align: center; color:red;" >El solicitante_1 esta solicitando (solicitud #),DD-MM-AAAA HH:MM </h5>
            </div>
            
            <div style=" display: flex; align-items: flex-start;">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor" class="w-3 h-3">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z" />
                </svg>              
                <div style="margin-left: 10px;">
                    <p style="margin: 0;">@Solicitante_1</p>
                    <p style=" margin: 0;">DD-MM-AAAA (fecha del envio)</p>
                </div>
            </div>

            <div style="margin-bottom: 40px;">
                <img src="{% static 'dep_mantenimiento/img/TecMor.png' %}" class="logo" style="width: 70px; height: auto; position: absolute; left: 5%;">
            </div>
            <h5 style="text-align: center;">Solicitud_1 del solicitante_1</h5>

            <div style="background-color: #050506; 
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 3px 20px; 
            border-radius: 10px; /* Ajusta el valor según la curvatura que desees */
            max-width: calc(100% - 20%); /* 20px de espacio a la izquierda y 20px a la derecha */
            margin: 0 auto; /* Centra horizontalmente */">
            </div>



            <p>Se esta revisando (Solicitud_1);</p>

            <div style="text-align: center;">
                <button onclick="zoomIn()" style="border: none; background: none;width: 100px;">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-30 h-30">
                        <path stroke-linecap="round" stroke-linejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607ZM10.5 7.5v6m3-3h-6" />
                    </svg>          
                </button>
                <button onclick="zoomOut()" style="border: none; background: none;width: 100px;">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-30 h-30">
                        <path stroke-linecap="round" stroke-linejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607ZM13.5 10.5h-6" />
                    </svg>          
                </button>
                
            </div>


            <div id="pdf-container" style="overflow-y: scroll; direction: rtl; width: 100%; height: 50vh;"></div>

<div>
    
    <div>
        <div style="display: flex; align-items: center;">
            <label for="asignar" style="height: 20px; margin-right: 10px;">Asignar a:</label>
            <select id="asignar" name="asignar" style="width: 30%; height: 20px; align-items: center;">
                <option value="nombre1">Nombre 1</option>
                <option value="nombre2">Nombre 2</option>
                <option value="nombre3">Nombre 3</option>
                <!-- Agrega más opciones según necesites -->
            </select>
        </div>
        <div style="display: flex; align-items: center;">
            <label for="prioridad" style="height: 20px; margin-right: 10px;">Prioridad:</label>
            <select id="prioridad" name="prioridad" style="width: 30%; height: 20px; display: inline-block;">
                <option value="alta">Alta</option>
                <option value="media">Media</option>
                <option value="baja">Baja</option>
            </select>
        </div>
    </div>
    
    
<div>
        <label for="material" style="width: 200px;">Material a utilizar:</label>
    </div>
    <textarea id="material" name="material" rows="4" cols="50" style="width: 70%;"></textarea>
        <div style="display: flex; justify-content: space-between; align-items: center; height: 20px;">
            <button id="aceptar" style="background-color: #041756; color: white; padding: .5px 40px; border: none; border-radius: 15px; cursor: pointer;">Aceptar</button>
            <a  href="{% url 'Rechazar_form_jMantenimiento' %}">
            <button id="rechazar" style="background-color: #041756; color: white; padding: .5px 40px; border: none; border-radius: 15px; cursor: pointer;">Rechazar</button>
            </a>
        </div>
        <br><br>

</div>
    
    <script>
        document.getElementById('descargar-solicitud').addEventListener('click', function() {
            alert('pasa a la pantalla de firmar a firmar');
        });
    </script>
</div>

<script>
    const url = "{% static 'dep_mantenimiento/img/docu.pdf' %}"; // Ruta de tu archivo PDF
    const scale = 1.5; // Escala inicial del PDF
    let currentScale = scale; // Escala actual del PDF

    // Función para cargar el PDF
    pdfjsLib.getDocument(url).promise.then(pdf => {
        for (let pageNum = 1; pageNum <= pdf.numPages; pageNum++) {
            pdf.getPage(pageNum).then(page => {
                const canvas = document.createElement('canvas');
                const context = canvas.getContext('2d');
                const viewport = page.getViewport({ scale: currentScale });

                canvas.height = viewport.height;
                canvas.width = viewport.width;

                const renderContext = {
                    canvasContext: context,
                    viewport
                };

                page.render(renderContext).promise.then(() => {
                    document.getElementById('pdf-container').appendChild(canvas);
                });
            });
        }
    });

    // Función para aumentar el zoom
    function zoomIn() {
        currentScale += 0.1;
        renderPdf(currentScale);
    }

    // Función para disminuir el zoom
    function zoomOut() {
        currentScale = Math.max(currentScale - 0.1, 0.1);
        renderPdf(currentScale);
    }

    // Función para renderizar el PDF con la escala especificada
    function renderPdf(scale) {
        const pdfContainer = document.getElementById('pdf-container');
        pdfContainer.innerHTML = ''; // Limpiar el contenedor antes de renderizar de nuevo

        pdfjsLib.getDocument(url).promise.then(pdf => {
            for (let pageNum = 1; pageNum <= pdf.numPages; pageNum++) {
                pdf.getPage(pageNum).then(page => {
                    const canvas = document.createElement('canvas');
                    const context = canvas.getContext('2d');
                    const viewport = page.getViewport({ scale });

                    canvas.height = viewport.height;
                    canvas.width = viewport.width;

                    const renderContext = {
                        canvasContext: context,
                        viewport
                    };

                    page.render(renderContext).promise.then(() => {
                        pdfContainer.appendChild(canvas);
                    });
                });
            }
        });
    }

    // Función para firmar la solicitud (redirecciona a otra página)
    function firmarSolicitud() {
        window.location.href = '/ruta/a/otra/pagina';
    }
</script>



<div style="background-color: #050506; 
display: flex;
justify-content: space-between;
align-items: center;
padding: 3px 20px; 
border-radius: 10px; /* Ajusta el valor según la curvatura que desees */
max-width: calc(100% - 20%); /* 20px de espacio a la izquierda y 20px a la derecha */
margin: 0 auto; /* Centra horizontalmente */">
<!-- Tu contenido aquí -->
</div>



<h2 class="subtitle">Estado de la solicitud</h2>


<div class="seguimiento" style="max-width: 800px; margin: 0 auto;">
    <div class="etapa" style="margin-left: 200px; display: flex; align-items: flex-start; margin-bottom: 20px;">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6" style="margin-right: 10px;">
            <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
        </svg>
        <div style="margin-left: 10px;">
            <p style="color: red; margin: 0;">Solicitud enviada al jefe de departamento</p>
            <p style=" margin: 0;">Fecha y hora: XX/XX/XXXX XX:XX</p>
        </div>
    </div>
    <div style="margin-left: 230px;
    width: 2px;
    background-color: #007bff;height: 100%;">
    </div>

    <div class="etapa" style="margin-left: 200px; display: flex; align-items: flex-start; margin-bottom: 20px;">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6" style="margin-right: 10px;">
            <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
        </svg> 
        <div style="margin-left: 10px;">
            <p style="color: red; margin: 0;">Solicitud firmada por el jefe de departamento de mantenimiento</p>
            <p style=" margin: 0;">Fecha y hora: XX/XX/XXXX XX:XX</p>
        </div>
    </div>
    
    <div class="etapa" style="margin-left: 200px; display: flex; align-items: flex-start; margin-bottom: 20px;">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
        </svg>                  
        <div style="margin-left: 10px;">
            <p style="color: red; margin: 0;">Solicitud atendida por el trabajador</p>
            <p style=" margin: 0;">Nombre del trabajador: [Nombre]</p>
            <p style=" margin: 0;">Fecha y hora: XX/XX/XXXX XX:XX</p>
        </div>
    </div>
    
    <div class="etapa" style="margin-left: 200px; display: flex; align-items:flex-start; margin-bottom: 20px;">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
            <path stroke-linecap="round" stroke-linejoin="round" d="m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
        </svg>                   
        <div style="margin-left: 10px;">
            <p style="color: red; margin: 0;">Solicitud finalizada por el empleado</p>
            <p style=" margin: 0;">Nombre del empleado: [Nombre]</p>
            <p style=" margin: 0;">Fecha y hora: XX/XX/XXXX XX:XX</p>
        </div>
    </div>
    
    <div class="etapa" style="margin-left: 200px; display: flex; align-items: flex-start; margin-bottom: 20px;">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
            <path stroke-linecap="round" stroke-linejoin="round" d="m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
        </svg>                  
        <div style="margin-left: 10px;">
            <p style="color: red; margin: 0;">Servicio aprobado por el jefe de departamento de mantenimiento</p>
            <p style=" margin: 0;">Fecha y hora: XX/XX/XXXX XX:XX</p>
        </div>
    </div>
</div>



<div>
    <p style="text-align: center;">Dar click en "Descargar solicitud" para obtener el documento en PDF</p>
    <button id="descargar-solicitud" style="background-color: #041756; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; margin: 0 auto; display: block;">Descargar solicitud</button>
</div>

<script>
    document.getElementById('descargar-solicitud').addEventListener('click', function() {
        alert('El archivo se ha descargado correctamente.');
    });
</script>

</div>
</form>   
    </body>
 </html>
   

   
   


</span>

      

{% endblock %}